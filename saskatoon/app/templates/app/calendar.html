{% extends "app/base_site.html" %}
{% load staticfiles %}
{% load i18n %}
{% load bootstrap3 %}


{% block title %} Form Advanced {% endblock title %}

{% block stylesheets %}
  {{ block.super }}
  <!-- FullCalendar -->
  <link href="/static/vendors/fullcalendar/dist/fullcalendar.min.css" rel="stylesheet">
  <link href="/static/vendors/fullcalendar/dist/fullcalendar.print.css" rel="stylesheet" media="print">
{% endblock stylesheets %}

{% block content %}
  <div class="right_col" role="main">
    <div class="">
      <div class="clearfix"></div>
      <div class="row">
        <div class="col-md-12">
          <div class="x_panel">
            <div class="x_title">
              <h2>{% trans "Harvest calendar" %} <small> {% trans "Choose a pick!" %}</small></h2>
              <div class="clearfix"></div>
            </div>
            <div class="x_content">

              <div id='calendar'></div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- calendar modal -->
    <div id="CalenderModalEdit" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">

          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h4 class="modal-title" id="myModalLabel2">{% trans "New request" %}</h4>
          </div>
          <div class="modal-body">
          <p id="description"></p>

            <div id="testmodal2" style="padding: 5px 20px;">

                   <form id="form_request" method="post" action="">
                       {% csrf_token %}
                       {% bootstrap_form form_request %}
                       <input type="hidden" name="harvest_id" value="" id="harvest_id" />
                  {% buttons %}
                      <button type="button" class="btn btn-default antoclose2" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary antosubmit2">{% trans "Save" %}</button>
                  {% endbuttons %}
                   </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="fc_edit" data-toggle="modal" data-target="#CalenderModalEdit"></div>
    <!-- /calendar modal -->
  </div>
{% endblock content %}

{% block javascripts %}
  {{ block.super }}
  <!-- FullCalendar -->
  <script src="/static/vendors/moment/min/moment.min.js"></script>
  <script src="/static/vendors/fullcalendar/dist/fullcalendar.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#calendar').fullCalendar({
                events: '/jsoncal/',
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },
                eventLimit: true,
                eventClick:  function(event, jsEvent, view) {
                    $('#title').html(event.title);
                    $('#harvest_id').attr('value', event.harvest_id);
                    $('#description').html(event.description);
                    $('#form_request').attr('action', event.url);
                    $('#CalenderModalEdit').modal();
                    return false;
                }
            });
        });
    </script>
{% endblock javascripts %}
